<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:WslPostgreTool.ViewModels"
        xmlns:m="using:WslPostgreTool.Models"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:converters="clr-namespace:WslPostgreTool.Converters"
        mc:Ignorable="d" d:DesignWidth="1400" d:DesignHeight="900"
        x:Class="WslPostgreTool.Views.MainView"
        x:DataType="vm:MainViewModel"
        Title="WSL PostgreSQL ç®¡ç†ãƒ„ãƒ¼ãƒ«"
        Width="1400" Height="900"
        MinWidth="1000" MinHeight="700"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5">
    
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>
    
    <Window.Resources>
        <converters:GreaterThanConverter x:Key="GreaterThanConverter"/>
        <converters:LessThanConverter x:Key="LessThanConverter"/>
    </Window.Resources>
    
    <Window.Styles>
        <!-- å…¨å±€æ–‡æœ¬æ ·å¼ -->
        <Style Selector="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#333333"/>
        </Style>
        
        <!-- æ ‡é¢˜æ ·å¼ -->
        <Style Selector="TextBlock.title">
            <Setter Property="FontSize" Value="22"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#1E88E5"/>
            <Setter Property="Margin" Value="0,0,0,20"/>
        </Style>
        
        <Style Selector="TextBlock.section-title">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#424242"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>
        
        <!-- æŒ‰é’®æ ·å¼ -->
        <Style Selector="Button">
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Margin" Value="0,0,8,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="MinWidth" Value="120"/>
            <Setter Property="CornerRadius" Value="4"/>
        </Style>
        
        <Style Selector="Button.primary">
            <Setter Property="Background" Value="#1E88E5"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        
        <Style Selector="Button.primary:pointerover">
            <Setter Property="Background" Value="#1976D2"/>
        </Style>
        
        <Style Selector="Button.danger">
            <Setter Property="Background" Value="#E53935"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        
        <Style Selector="Button.danger:pointerover">
            <Setter Property="Background" Value="#C62828"/>
        </Style>
        
        <Style Selector="Button.success">
            <Setter Property="Background" Value="#43A047"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        
        <Style Selector="Button.success:pointerover">
            <Setter Property="Background" Value="#388E3C"/>
        </Style>
        
        <!-- å¡ç‰‡æ ·å¼ -->
        <Style Selector="Border.card">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>
        
        <!-- è¾“å…¥æ¡†æ ·å¼ -->
        <Style Selector="TextBox, ComboBox">
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>
        
        <!-- è¿›åº¦æ¡æ ·å¼ -->
        <Style Selector="ProgressBar">
            <Setter Property="Height" Value="24"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="CornerRadius" Value="4"/>
        </Style>
        
        
    </Window.Styles>

    <Grid RowDefinitions="Auto,*,Auto">
        <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
        <Border Grid.Row="0" Background="#1E88E5" Padding="20,15">
            <Grid ColumnDefinitions="*,Auto">
                <TextBlock Grid.Column="0" Text="WSL PostgreSQL ç®¡ç†ãƒ„ãƒ¼ãƒ«" 
                          FontSize="20" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                <TextBlock Grid.Column="1" Text="v1.0" 
                          FontSize="12" Foreground="#BBDEFB" VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <!-- ã‚¿ãƒ–ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
        <TabControl Grid.Row="1" Margin="15">
            <TabControl.Styles>
                <Style Selector="TabItem">
                    <Setter Property="Padding" Value="20,12"/>
                    <Setter Property="FontSize" Value="15"/>
                    <Setter Property="FontWeight" Value="Normal"/>
                </Style>
                <Style Selector="TabItem:selected">
                    <Setter Property="Foreground" Value="#1E88E5"/>
                </Style>
            </TabControl.Styles>

            <!-- DBè¨­å®šã‚¿ãƒ– -->
            <TabItem Header="ðŸ“‹ DBè¨­å®š">
                <ScrollViewer>
                    <Grid Margin="20" RowDefinitions="Auto,Auto,Auto,Auto">
                        <TextBlock Grid.Row="0" Text="ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šè¨­å®š" Classes="title"/>
                        
                        <!-- æ“ä½œæŒ‰é’®åŒºåŸŸ -->
                        <Border Grid.Row="1" Classes="card">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Connections.Count, StringFormat='è¿žæŽ¥æ•°: {0}'}" 
                                           Margin="0,0,20,0"
                                           VerticalAlignment="Center"/>
                                <Button Content="âž• æŽ¥ç¶šã‚’è¿½åŠ " 
                                        Command="{Binding DbConfigViewModel.AddConnectionCommand}" 
                                        Classes="primary"/>
                                <Button Content="ðŸ”„ WSLãƒªã‚¹ãƒˆã‚’æ›´æ–°" 
                                       Command="{Binding DbConfigViewModel.RefreshWslDistributionsCommand}"/>
                            </StackPanel>
                        </Border>
                        
                        <Border Grid.Row="2" Classes="card">
    <Grid RowDefinitions="Auto,*">
        <TextBlock Grid.Row="0" Text="æŽ¥ç¶šä¸€è¦§" Classes="section-title"/>
        
        <!-- è¡¨å¤´ -->
        <Border Grid.Row="1" 
                Background="#F5F5F5" 
                Height="40" 
                VerticalAlignment="Top"
                Margin="0,0,0,10"
                BorderBrush="#E0E0E0"
                BorderThickness="0,0,0,1">
            <Grid ColumnDefinitions="150,120,80,120,120,120,150,100">
                <TextBlock Grid.Column="0" Text="è¨­å®šå" FontWeight="Bold" Margin="10,0"/>
                <TextBlock Grid.Column="1" Text="ãƒ›ã‚¹ãƒˆ" FontWeight="Bold" Margin="10,0"/>
                <TextBlock Grid.Column="2" Text="ãƒãƒ¼ãƒˆ" FontWeight="Bold" Margin="10,0"/>
                <TextBlock Grid.Column="3" Text="ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹" FontWeight="Bold" Margin="10,0"/>
                <TextBlock Grid.Column="4" Text="ãƒ¦ãƒ¼ã‚¶ãƒ¼" FontWeight="Bold" Margin="10,0"/>
                <TextBlock Grid.Column="5" Text="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" FontWeight="Bold" Margin="10,0"/>
                <TextBlock Grid.Column="6" Text="WSL" FontWeight="Bold" Margin="10,0"/>
                <TextBlock Grid.Column="7" Text="æ“ä½œ" FontWeight="Bold" Margin="10,0"/>
            </Grid>
        </Border>
        
        <!-- æ•°æ®è¡Œ -->
        <ScrollViewer Grid.Row="1" Margin="0,40,0,0">
            <ItemsControl ItemsSource="{Binding DbConfigViewModel.Connections}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Margin="0,0,0,1" 
                               Background="White" 
                               BorderBrush="#E0E0E0" 
                               BorderThickness="0,0,0,1"
                               Padding="10,8">
                            <Grid ColumnDefinitions="150,120,80,120,120,120,150,100">
                                <!-- è¨­å®šå -->
                                <TextBox Grid.Column="0" 
                                        Text="{Binding ConfigurationName, Mode=TwoWay}"
                                        Margin="5,0"
                                        BorderThickness="1"
                                        BorderBrush="#CCCCCC"
                                        Padding="8,6"
                                        FontSize="13"/>
                                
                                <!-- ãƒ›ã‚¹ãƒˆ -->
                                <TextBox Grid.Column="1" 
                                        Text="{Binding Host, Mode=TwoWay}"
                                        Margin="5,0"
                                        BorderThickness="1"
                                        BorderBrush="#CCCCCC"
                                        Padding="8,6"
                                        FontSize="13"/>
                                
                                <!-- ãƒãƒ¼ãƒˆ -->
                                <TextBox Grid.Column="2" 
                                        Text="{Binding Port, Mode=TwoWay}"
                                        Margin="5,0"
                                        BorderThickness="1"
                                        BorderBrush="#CCCCCC"
                                        Padding="8,6"
                                        FontSize="13"/>
                                
                                <!-- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ -->
                                <TextBox Grid.Column="3" 
                                        Text="{Binding Database, Mode=TwoWay}"
                                        Margin="5,0"
                                        BorderThickness="1"
                                        BorderBrush="#CCCCCC"
                                        Padding="8,6"
                                        FontSize="13"/>
                                
                                <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ -->
                                <TextBox Grid.Column="4" 
                                        Text="{Binding User, Mode=TwoWay}"
                                        Margin="5,0"
                                        BorderThickness="1"
                                        BorderBrush="#CCCCCC"
                                        Padding="8,6"
                                        FontSize="13"/>
                                
                                <!-- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ -->
                                <TextBox Grid.Column="5" 
                                        Text="{Binding Password, Mode=TwoWay}"
                                        Margin="5,0"
                                        BorderThickness="1"
                                        BorderBrush="#CCCCCC"
                                        Padding="8,6"
                                        FontSize="13"
                                        UseFloatingWatermark="False">
                                    <TextBox.Watermark>
                                        <!-- <TextBlock Text="(optional)" Foreground="#999999"/> -->
                                    </TextBox.Watermark>
                                </TextBox>
                                
                                <!-- WSLãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ -->
                                <ComboBox Grid.Column="6" 
                                         ItemsSource="{Binding $parent[ItemsControl].DataContext.DbConfigViewModel.WslDistributions}"
                                         SelectedItem="{Binding WslDistro, Mode=TwoWay}"
                                         Margin="5,0"
                                         Padding="8,6"
                                         FontSize="13">
                                    <ComboBox.Styles>
                                        <Style Selector="ComboBox">
                                            <Setter Property="Background" Value="White"/>
                                            <Setter Property="BorderBrush" Value="#CCCCCC"/>
                                        </Style>
                                    </ComboBox.Styles>
                                </ComboBox>
                                
                                <!-- æ“ä½œ -->
                                <Button Grid.Column="7"
                                       Content="ðŸ—‘ï¸ å‰Šé™¤" 
                                       Command="{Binding $parent[ItemsControl].DataContext.DbConfigViewModel.RemoveConnectionCommand}" 
                                       CommandParameter="{Binding}"
                                       Classes="danger"
                                       HorizontalAlignment="Left"
                                       Padding="8,6"
                                       FontSize="12"
                                       Margin="5,0"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</Border>
                    </Grid>
                </ScrollViewer>
            </TabItem>

            <!-- ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚¿ãƒ– -->
            <TabItem Header="ðŸ“¤ ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ">
                <ScrollViewer>
                    <Grid Margin="20" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto">
                        <TextBlock Grid.Row="0" Text="ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ" Classes="title"/>
                        
                        <!-- è¿žæŽ¥é€‰æ‹© -->
                        <Border Grid.Row="1" Classes="card">
                            <Grid RowDefinitions="Auto,Auto">
                                <TextBlock Grid.Row="0" Text="æŽ¥ç¶šé¸æŠž" Classes="section-title"/>
                                <Grid Grid.Row="1" ColumnDefinitions="*,Auto">
                                    <ComboBox Grid.Column="0" 
                                             ItemsSource="{Binding ImportExportViewModel.Connections}" 
                                             SelectedItem="{Binding ImportExportViewModel.SelectedConnection}" 
                                             PlaceholderText="æŽ¥ç¶šã‚’é¸æŠžã—ã¦ãã ã•ã„"
                                             Margin="0,0,10,0">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding ConfigurationName}"/>
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                    <Button Grid.Column="1" 
                                           Content="ðŸ“‹ ãƒ†ãƒ¼ãƒ–ãƒ«ãƒªã‚¹ãƒˆã‚’èª­ã¿è¾¼ã¿" 
                                           Command="{Binding ImportExportViewModel.LoadTablesCommand}"
                                           Classes="primary"/>
                                </Grid>
                            </Grid>
                        </Border>
                        
                        <!-- å¯¼å‡ºå’Œå¯¼å…¥åŒºåŸŸ -->
                        <Grid Grid.Row="2" ColumnDefinitions="*,*" Margin="0,0,0,15">
                            <!-- å¯¼å‡ºå¡ç‰‡ -->
                            <Border Grid.Column="0" Classes="card" Margin="0,0,10,0">
                                <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto">
                                    <TextBlock Grid.Row="0" Text="ðŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ" Classes="section-title"/>
                                    <TextBox Grid.Row="1" 
                                            Text="{Binding ImportExportViewModel.ExportFolderPath}" 
                                            Watermark="ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠžã—ã¦ãã ã•ã„" 
                                            Margin="0,0,0,8"/>
                                    <Button Grid.Row="2" 
                                           Content="ðŸ“ ãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠž" 
                                           Command="{Binding ImportExportViewModel.SelectExportFolderCommand}"
                                           Classes="primary"
                                           Margin="0,0,0,12"/>
                                    <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,0,0,12">
                                        <Button Content="âœ“ å…¨é¸æŠž" 
                                               Command="{Binding ImportExportViewModel.SelectAllTablesCommand}"
                                               Margin="0,0,8,0"/>
                                        <Button Content="âœ— å…¨è§£é™¤"
                                               Command="{Binding ImportExportViewModel.DeselectAllTablesCommand}"
                                               Margin="0,0,8,0"/>
                                    </StackPanel>
                                    <Button Grid.Row="4" 
                                           Content="â–¶ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Ÿè¡Œ" 
                                           Command="{Binding ImportExportViewModel.ExportTablesCommand}" 
                                           IsEnabled="{Binding !ImportExportViewModel.IsProcessing}"
                                           Classes="success"/>
                                </Grid>
                            </Border>
                            
                            <!-- å¯¼å…¥å¡ç‰‡ -->
                            <Border Grid.Column="1" Classes="card" Margin="10,0,0,0">
                                <Grid RowDefinitions="Auto,Auto,Auto,Auto">
                                    <TextBlock Grid.Row="0" Text="ðŸ“¥ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ" Classes="section-title"/>
                                    <TextBox Grid.Row="1" 
                                            Text="{Binding ImportExportViewModel.ImportFolderPath}" 
                                            Watermark="ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠžã—ã¦ãã ã•ã„" 
                                            Margin="0,0,0,8"/>
                                    <Button Grid.Row="2" 
                                           Content="ðŸ“ ãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠž" 
                                           Command="{Binding ImportExportViewModel.SelectImportFolderCommand}"
                                           Classes="primary"
                                           Margin="0,0,0,12"/>
                                    <Button Grid.Row="3" 
                                           Content="â–¶ ã‚¤ãƒ³ãƒãƒ¼ãƒˆå®Ÿè¡Œ" 
                                           Command="{Binding ImportExportViewModel.ImportTablesCommand}" 
                                           IsEnabled="{Binding !ImportExportViewModel.IsProcessing}"
                                           Classes="success"/>
                                </Grid>
                            </Border>
                        </Grid>
                        
                        <Border Grid.Row="3" Classes="card">
                            <Grid RowDefinitions="Auto,*">
                                <TextBlock Grid.Row="0" Text="ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§ (ãƒ†ã‚¹ãƒˆè¡¨ç¤º)" Classes="section-title"/>
        
                                <ListBox Grid.Row="1" 
                                         ItemsSource="{Binding ImportExportViewModel.Tables}"
                                         MaxHeight="350"
                                         Background="White">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border Padding="10,5" BorderBrush="#E0E0E0" BorderThickness="0,0,0,1">
                                                <Grid ColumnDefinitions="40,100,*,80">
                                                    <CheckBox Grid.Column="0" 
                                                              IsChecked="{Binding IsSelected}"
                                                              VerticalAlignment="Center"/>
                                                    <TextBlock Grid.Column="1" 
                                                               Text="{Binding SchemaName}" 
                                                               VerticalAlignment="Center"/>
                                                    <TextBlock Grid.Column="2" 
                                                               Text="{Binding TableName}" 
                                                               VerticalAlignment="Center"/>
                                                    <TextBlock Grid.Column="3" 
                                                               Text="{Binding RowCount, StringFormat='{}{0:N0}è¡Œ'}" 
                                                               VerticalAlignment="Center"
                                                               HorizontalAlignment="Right"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </Grid>
                        </Border>
                        
                        <!-- è¿›åº¦æ¡ -->
                        <Border Grid.Row="4" Classes="card" IsVisible="{Binding ImportExportViewModel.IsProcessing}">
                            <Grid RowDefinitions="Auto,Auto">
                                <TextBlock Grid.Row="0" Text="å‡¦ç†ä¸­..." Classes="section-title"/>
                                <ProgressBar Grid.Row="1" 
                                            Value="{Binding ImportExportViewModel.ProgressValue}" 
                                            Maximum="100"/>
                            </Grid>
                        </Border>
                        
                        <!-- æ—¥å¿—åŒºåŸŸ -->
                        <Border Grid.Row="5" Classes="card" Margin="0,10,0,0">
                            <Grid RowDefinitions="Auto,*">
                                <TextBlock Grid.Row="0" Text="ðŸ“ ãƒ­ã‚°" Classes="section-title"/>
                                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" MaxHeight="120">
                                    <TextBlock Text="{Binding ImportExportViewModel.LogMessage}" 
                                              TextWrapping="Wrap"
                                              Foreground="#666666"
                                              FontFamily="Consolas, Courier New, monospace"/>
                                </ScrollViewer>
                            </Grid>
                        </Border>
                    </Grid>
                </ScrollViewer>
            </TabItem>

            <!-- ãƒ‡ãƒ¼ã‚¿æ¯”è¼ƒã‚¿ãƒ– -->
            <TabItem Header="ðŸ” ãƒ‡ãƒ¼ã‚¿æ¯”è¼ƒ">
                <ScrollViewer>
                    <Grid Margin="20" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto">
                        <TextBlock Grid.Row="0" Text="ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¯”è¼ƒ" Classes="title"/>
                        
                        <!-- è¿žæŽ¥é€‰æ‹© -->
                        <Border Grid.Row="1" Classes="card">
                            <Grid RowDefinitions="Auto,Auto" ColumnDefinitions="*,*">
                                <TextBlock Grid.Row="0" Grid.ColumnSpan="2" Text="æŽ¥ç¶šé¸æŠž" Classes="section-title" Margin="0,0,0,15"/>
                                
                                <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,10,0">
                                    <TextBlock Text="æ—§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹" FontWeight="Bold" Margin="0,0,0,8"/>
                                    <ComboBox ItemsSource="{Binding CompareViewModel.Connections}" 
                                             SelectedItem="{Binding CompareViewModel.OldConnection}" 
                                             PlaceholderText="æ—§æŽ¥ç¶šã‚’é¸æŠžã—ã¦ãã ã•ã„">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding ConfigurationName}"/>
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                </StackPanel>
                                
                                <StackPanel Grid.Row="1" Grid.Column="1" Margin="10,0,0,0">
                                    <TextBlock Text="æ–°ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹" FontWeight="Bold" Margin="0,0,0,8"/>
                                    <ComboBox ItemsSource="{Binding CompareViewModel.Connections}" 
                                             SelectedItem="{Binding CompareViewModel.NewConnection}" 
                                             PlaceholderText="æ–°æŽ¥ç¶šã‚’é¸æŠžã—ã¦ãã ã•ã„">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding ConfigurationName}"/>
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                </StackPanel>
                            </Grid>
                        </Border>
                        
                        <!-- è¡¨æ ¼é€‰æ‹© -->
                        <Border Grid.Row="2" Classes="card">
                            <Grid RowDefinitions="Auto,Auto,Auto">
                                <TextBlock Grid.Row="0" Text="ãƒ†ãƒ¼ãƒ–ãƒ«é¸æŠž" Classes="section-title"/>
                                <Button Grid.Row="1" 
                                       Content="ðŸ“‹ ãƒ†ãƒ¼ãƒ–ãƒ«ãƒªã‚¹ãƒˆã‚’èª­ã¿è¾¼ã¿" 
                                       Command="{Binding CompareViewModel.LoadTablesCommand}"
                                       Classes="primary"
                                       Margin="0,0,0,12"/>
                                <ComboBox Grid.Row="2" 
                                         ItemsSource="{Binding CompareViewModel.Tables}" 
                                         SelectedItem="{Binding CompareViewModel.SelectedTable}" 
                                         PlaceholderText="æ¯”è¼ƒã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’é¸æŠžã—ã¦ãã ã•ã„">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding FullName}"/>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>
                            </Grid>
                        </Border>
                        
                        <!-- å¯¼å‡ºè®¾ç½® -->
                        <Border Grid.Row="3" Classes="card">
                            <Grid RowDefinitions="Auto,Auto">
                                <TextBlock Grid.Row="0" Text="ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆè¨­å®š" Classes="section-title"/>
                                <Grid Grid.Row="1" ColumnDefinitions="*,Auto">
                                    <TextBox Grid.Column="0" 
                                            Text="{Binding CompareViewModel.ExportFilePath}" 
                                            Watermark="ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ (.xlsx)" 
                                            Margin="0,0,10,0"/>
                                    <Button Grid.Column="1" 
                                           Content="ðŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠž" 
                                           Command="{Binding CompareViewModel.SelectExportFileCommand}"
                                           Classes="primary"/>
                                </Grid>
                            </Grid>
                        </Border>
                        
                        <!-- æ‰§è¡ŒæŒ‰é’® -->
                        <Border Grid.Row="4" Classes="card">
                            <Button Content="â–¶ æ¯”è¼ƒå®Ÿè¡Œ" 
                                   Command="{Binding CompareViewModel.CompareTablesCommand}" 
                                   IsEnabled="{Binding !CompareViewModel.IsProcessing}"
                                   Classes="success"
                                   HorizontalAlignment="Stretch"
                                   HorizontalContentAlignment="Center"
                                   FontSize="16"
                                   Padding="20,12"/>
                        </Border>
                        
                        <!-- è¿›åº¦æ¡ -->
                        <Border Grid.Row="5" Classes="card" IsVisible="{Binding CompareViewModel.IsProcessing}">
                            <Grid RowDefinitions="Auto,Auto">
                                <TextBlock Grid.Row="0" Text="å‡¦ç†ä¸­..." Classes="section-title"/>
                                <ProgressBar Grid.Row="1" 
                                            Value="{Binding CompareViewModel.ProgressValue}" 
                                            Maximum="100"/>
                            </Grid>
                        </Border>
                        
                        <!-- æ—¥å¿—åŒºåŸŸ -->
                        <Border Grid.Row="6" Classes="card" Margin="0,10,0,0">
                            <Grid RowDefinitions="Auto,*">
                                <TextBlock Grid.Row="0" Text="ðŸ“ ãƒ­ã‚°" Classes="section-title"/>
                                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" MaxHeight="150">
                                    <TextBlock Text="{Binding CompareViewModel.LogMessage}" 
                                              TextWrapping="Wrap"
                                              Foreground="#666666"
                                              FontFamily="Consolas, Courier New, monospace"/>
                                </ScrollViewer>
                            </Grid>
                        </Border>
                    </Grid>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- åº•éƒ¨æ—¥å¿—åŒºåŸŸ -->
        <Border Grid.Row="2" 
               Background="#FAFAFA" 
               BorderBrush="#E0E0E0" 
               BorderThickness="0,2,0,0" 
               Padding="15,12"
               MaxHeight="180">
            <Grid RowDefinitions="Auto,*">
                <TextBlock Grid.Row="0" 
                          Text="ðŸ“‹ ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°" 
                          FontWeight="Bold" 
                          FontSize="13"
                          Foreground="#666666"
                          Margin="0,0,0,8"/>
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <TextBlock Text="{Binding LogMessage}" 
                              TextWrapping="Wrap"
                              Foreground="#424242"
                              FontFamily="Consolas, Courier New, monospace"
                              FontSize="12"/>
                </ScrollViewer>
            </Grid>
        </Border>
    </Grid>
</Window>
