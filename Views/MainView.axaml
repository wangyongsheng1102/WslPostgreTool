<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:WslPostgreTool.ViewModels"
        xmlns:m="using:WslPostgreTool.Models"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:converters="clr-namespace:WslPostgreTool.Converters"
        mc:Ignorable="d"
        d:DesignWidth="1200"
        d:DesignHeight="800"
        x:Class="WslPostgreTool.Views.MainView"
        x:DataType="vm:MainViewModel"
        Title="ãƒ‡ãƒ¼ã‚¿æ¯”è¼ƒãƒ»ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ„ãƒ¼ãƒ«ã€ŒPostgreç‰ˆã€Powered by Avalonia"
        Width="1200" Height="800"
        MinWidth="800" MinHeight="600"
        WindowStartupLocation="CenterScreen"
        Background="#F8F9FA">
    
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <Window.Resources>
        <converters:GreaterThanConverter x:Key="GreaterThanConverter"/>
        <converters:LessThanConverter x:Key="LessThanConverter"/>
        <converters:SelectedCountConverter x:Key="SelectedCountConverter"/>
        <converters:LogLevelToColorConverter x:Key="LogLevelToColorConverter"/>
    </Window.Resources>

    <Window.Styles>
        <!-- å…¨å±€æ–‡æœ¬æ ·å¼ -->
        <Style Selector="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontFamily" Value="avares://WslPostgreTool/Assets/LXGWWenKai-Bold.ttf#éœžé¹œæ–‡æ¥·"></Setter>
            <Setter Property="Foreground" Value="DarkSlateGray"/>
        </Style>

        <!-- æ ‡é¢˜æ ·å¼ -->
        <Style Selector="TextBlock.title">
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="Foreground" Value="CornflowerBlue"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>

        <Style Selector="TextBlock.section-title">
            <Setter Property="FontSize" Value="17"/>
            <Setter Property="Foreground" Value="#495057"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
        </Style>

        <!-- æŒ‰é’®æ ·å¼ -->
        <Style Selector="Button">
            <Setter Property="Padding" Value="14,10"/>
            <Setter Property="Margin" Value="0,0,10,10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontFamily" Value="avares://WslPostgreTool/Assets/LXGWWenKai-Bold.ttf#éœžé¹œæ–‡æ¥·"></Setter>
            <Setter Property="MinWidth" Value="130"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"></Setter>
        </Style>

        <Style Selector="Button.primary">
            <Setter Property="Background" Value="CornflowerBlue"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

        <Style Selector="Button.primary:pointerover">
            <Setter Property="Background" Value="CornflowerBlue"/>
        </Style>

        <Style Selector="Button.primary:pressed">
            <Setter Property="Background" Value="LightSkyBlue"/>
        </Style>

        <Style Selector="Button.danger">
            <Setter Property="Background" Value="#DC3545"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

        <Style Selector="Button.danger:pointerover">
            <Setter Property="Background" Value="Red"/>
        </Style>

        <Style Selector="Button.danger:pressed">
            <Setter Property="Background" Value="DarkRed"/>
        </Style>

        <Style Selector="Button.success">
            <Setter Property="Background" Value="DarkCyan"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

        <Style Selector="Button.success:pointerover">
            <Setter Property="Background" Value="LightGreen"/>
        </Style>

        <Style Selector="Button.success:pressed">
            <Setter Property="Background" Value="DarkGreen"/>
        </Style>

        <!-- å¡ç‰‡æ ·å¼ -->
        <Style Selector="Border.card">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#DEE2E6"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="13"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
        </Style>

        <!-- è¾“å…¥æ¡†æ ·å¼ -->
        <Style Selector="TextBox, ComboBox">
            <Setter Property="Padding" Value="14,10"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
            <Setter Property="FontFamily" Value="avares://WslPostgreTool/Assets/LXGWWenKai-Bold.ttf#éœžé¹œæ–‡æ¥·"></Setter>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#CED4DA"/>
        </Style>

        <Style Selector="TextBox:focus, ComboBox:focus">
            <Setter Property="BorderBrush" Value="#0D6EFD"/>
            <Setter Property="BorderThickness" Value="2"/>
        </Style>

        <!-- è¿›åº¦æ¡æ ·å¼ -->
        <Style Selector="ProgressBar">
            <Setter Property="Height" Value="28"/>
            <Setter Property="Margin" Value="0,0,0,14"/>
            <Setter Property="CornerRadius" Value="6"/>
        </Style>

        <!-- Tabæ ·å¼ -->
        <Style Selector="TabItem">
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="FontFamily" Value="avares://WslPostgreTool/Assets/LXGWWenKai-Bold.ttf#éœžé¹œæ–‡æ¥·"></Setter>
            <Setter Property="FontSize" Value="17"/>
            <Setter Property="Margin" Value="0,0,4,0"/>
        </Style>

        <Style Selector="TabItem:selected">
            <Setter Property="Foreground" Value="DeepSkyBlue"/>
        </Style>

        <!-- ListBoxæ ·å¼ -->
        <Style Selector="ListBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#DEE2E6"/>
            <Setter Property="CornerRadius" Value="6"/>
        </Style>

        <Style Selector="ListBoxItem:selected">
            <Setter Property="Background" Value="#E7F1FF"/>
        </Style>
    </Window.Styles>

    <Grid RowDefinitions="Auto,*,Auto">
        <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
        <Border Grid.Row="0"
                Background="DarkSlateBlue"
                Padding="14,14,14,14">
            <Grid ColumnDefinitions="*,Auto,Auto,Auto">
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="ðŸ—„ï¸"
                              FontSize="24"
                              Margin="0,0,14,0"
                              VerticalAlignment="Center"/>
                    <TextBlock Text="ãƒ‡ãƒ¼ã‚¿æ¯”è¼ƒãƒ»ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ„ãƒ¼ãƒ«ã€ŒPostgreç‰ˆã€"
                              FontSize="20"
                              Foreground="White"
                              VerticalAlignment="Center"/>
                </StackPanel>
                <TextBlock Grid.Column="1"
                          Text="{Binding AppVersion, StringFormat='Version-{0}'}"
                          FontSize="13"
                          Foreground="LightGray"
                          VerticalAlignment="Center"
                          Margin="0,0,0,0"
                          Cursor="Hand"
                          PointerPressed="VersionTextBlock_PointerPressed">
                    <TextBlock.Styles>
                        <Style Selector="TextBlock:pointerover">
                            <Setter Property="TextDecorations" Value="Underline"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Style>
                    </TextBlock.Styles>
                </TextBlock>
                <TextBlock Grid.Column="2"
                           Text="{Binding AppAuthor, StringFormat='Author-{0}'}"
                           FontSize="13"
                           Foreground="#B3D9FF"
                           VerticalAlignment="Center"
                           Margin="20,0,0,0"
                           Cursor="Hand"
                           PointerPressed="AuthorTextBlock_PointerPressed"/>
                <TextBlock Grid.Column="3"
                          Text="{Binding Connections.Count, StringFormat='æŽ¥ç¶šæ•°: {0}'}"
                          FontSize="13"
                          Foreground="#B3D9FF"
                          VerticalAlignment="Center"
                          Margin="20,0,0,0"
                          Cursor="Hand"
                          PointerPressed="ConnectionsCount_PointerPressed">
                    <TextBlock.Styles>
                        <Style Selector="TextBlock:pointerover">
                            <Setter Property="TextDecorations" Value="Underline"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Style>
                    </TextBlock.Styles>
                </TextBlock>
            </Grid>
        </Border>

        <!-- ã‚¿ãƒ–ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
        <TabControl Grid.Row="1" x:Name="MainTabControl"
                   Margin="14,14,14,14"
                   Background="Transparent">
            <!-- DBè¨­å®šã‚¿ãƒ– -->
            <TabItem Header="ðŸ“‹ DBè¨­å®š" x:Name="ConnectionTab">
                <Grid RowDefinitions="Auto,*">
                    <Grid Grid.Row="0"
                          RowDefinitions="Auto,Auto">
                        <TextBlock Grid.Row="0"
                                   Text="ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šè¨­å®š"
                                   Classes="title"
                                   Margin="8" />
                        <!-- æ“ä½œæŒ‰é’®åŒºåŸŸ -->
                        <Border Grid.Row="1" Classes="card" HorizontalAlignment="Stretch"
                                Background="LightCyan">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
                                <!-- <TextBlock Text="{Binding Connections.Count, StringFormat='æŽ¥ç¶šæ•°: {0}'}" -->
                                <!--           Margin="0,0,24,0" -->
                                <!--           VerticalAlignment="Center" -->
                                <!--           FontSize="15" -->
                                <!--           Foreground="#6C757D"/> -->
                                <Button Content="âž• æŽ¥ç¶šã‚’è¿½åŠ "
                                        Command="{Binding DbConfigViewModel.AddConnectionCommand}"
                                        Classes="primary"/>
                                <Button Content="ðŸ”„ WSLãƒªã‚¹ãƒˆã‚’æ›´æ–°"
                                        Command="{Binding DbConfigViewModel.RefreshWslDistributionsCommand}"
                                        IsVisible="False"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                    
                    <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Disabled"
                                  VerticalScrollBarVisibility="Auto"
                                  HorizontalAlignment="Stretch">
                        <Grid Margin="8" 
                              RowDefinitions="Auto"
                              HorizontalAlignment="Stretch">
                            
                            <!-- è¿žæŽ¥åˆ—è¡¨ -->
                            <Border Grid.Row="0" Classes="card" HorizontalAlignment="Stretch">
                                <Grid RowDefinitions="Auto,*" HorizontalAlignment="Stretch">
                                    <TextBlock Grid.Row="0"
                                              Text="æŽ¥ç¶šä¸€è¦§"
                                              Classes="section-title"/>

                                    <!-- è¡¨å¤´å’Œæ•°æ®è¡Œå®¹å™¨ -->
                                    <Grid Grid.Row="1" RowDefinitions="Auto,*" HorizontalAlignment="Stretch">
                                        <!-- è¡¨å¤´ -->
                                        <Border Grid.Row="0"
                                               Background="#F8F9FA"
                                               Height="44"
                                               VerticalAlignment="Top"
                                               Margin="0,0,0,0"
                                               BorderBrush="#DEE2E6"
                                               BorderThickness="0,0,0,2"
                                               CornerRadius="6,6,0,0"
                                               HorizontalAlignment="Stretch">
                                            <Grid ColumnDefinitions="2*,2*,1*,2*,2*,2*,2*,1.5*" 
                                                  HorizontalAlignment="Stretch"
                                                  Margin="0">
                                                <TextBlock Grid.Column="0"
                                                          Text="è¨­å®šå"
                                                          FontSize="13"
                                                          Margin="0,0"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Center"
                                                          Foreground="#495057"/>
                                                <TextBlock Grid.Column="1"
                                                          Text="ãƒ›ã‚¹ãƒˆ"
                                                          FontSize="13"
                                                          Margin="0,0"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Center"
                                                          Foreground="#495057"/>
                                                <TextBlock Grid.Column="2"
                                                          Text="ãƒãƒ¼ãƒˆ"
                                                          FontSize="13"
                                                          Margin="0,0"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Center"
                                                          Foreground="#495057"/>
                                                <TextBlock Grid.Column="3"
                                                          Text="ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"
                                                          FontSize="13"
                                                          Margin="0,0"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Center"
                                                          Foreground="#495057"/>
                                                <TextBlock Grid.Column="4"
                                                          Text="ãƒ¦ãƒ¼ã‚¶ãƒ¼"
                                                          FontSize="13"
                                                          Margin="0,0"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Center"
                                                          Foreground="#495057"/>
                                                <TextBlock Grid.Column="5"
                                                          Text="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"
                                                          FontSize="13"
                                                          Margin="0,0"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Center"
                                                          Foreground="#495057"/>
                                                <TextBlock Grid.Column="6"
                                                          Text="WSL"
                                                          FontSize="13"
                                                          Margin="0,0"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Center"
                                                          Foreground="#495057"/>
                                                <TextBlock Grid.Column="7"
                                                          Text="æ“ä½œ"
                                                          FontSize="13"
                                                          Margin="0,0"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Center"
                                                          Foreground="#495057"/>
                                            </Grid>
                                        </Border>

                                        <!-- æ•°æ®è¡Œ -->
                                        <ScrollViewer Grid.Row="1"
                                                    VerticalScrollBarVisibility="Auto"
                                                    HorizontalScrollBarVisibility="Disabled"
                                                    HorizontalAlignment="Stretch">
                                            <ItemsControl ItemsSource="{Binding DbConfigViewModel.Connections}" HorizontalAlignment="Stretch">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Margin="0,0,0,2"
                                                               Background="White"
                                                               BorderBrush="#E9ECEF"
                                                               BorderThickness="0,0,0,1"
                                                               Padding="0,10"
                                                               HorizontalAlignment="Stretch">
                                                            <Grid ColumnDefinitions="2*,2*,1*,2*,2*,2*,2*,1.5*" HorizontalAlignment="Stretch">
                                                                <!-- è¨­å®šå -->
                                                                <TextBox Grid.Column="0"
                                                                        Text="{Binding ConfigurationName, Mode=TwoWay}"
                                                                        Margin="6,0"
                                                                        BorderThickness="1"
                                                                        BorderBrush="#CED4DA"
                                                                        Padding="10,8"
                                                                        FontSize="13"
                                                                        CornerRadius="4"
                                                                        HorizontalAlignment="Stretch"/>

                                                                <!-- ãƒ›ã‚¹ãƒˆ -->
                                                                <TextBox Grid.Column="1"
                                                                        Text="{Binding Host, Mode=TwoWay}"
                                                                        Margin="6,0"
                                                                        BorderThickness="1"
                                                                        BorderBrush="#CED4DA"
                                                                        Padding="10,8"
                                                                        FontSize="13"
                                                                        CornerRadius="4"
                                                                        HorizontalAlignment="Stretch"/>

                                                                <!-- ãƒãƒ¼ãƒˆ -->
                                                                <TextBox Grid.Column="2"
                                                                        Text="{Binding Port, Mode=TwoWay}"
                                                                        Margin="6,0"
                                                                        BorderThickness="1"
                                                                        BorderBrush="#CED4DA"
                                                                        Padding="10,8"
                                                                        FontSize="13"
                                                                        CornerRadius="4"
                                                                        HorizontalAlignment="Stretch"/>

                                                                <!-- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ -->
                                                                <TextBox Grid.Column="3"
                                                                        Text="{Binding Database, Mode=TwoWay}"
                                                                        Margin="6,0"
                                                                        BorderThickness="1"
                                                                        BorderBrush="#CED4DA"
                                                                        Padding="10,8"
                                                                        FontSize="13"
                                                                        CornerRadius="4"
                                                                        HorizontalAlignment="Stretch"/>

                                                                <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ -->
                                                                <TextBox Grid.Column="4"
                                                                        Text="{Binding User, Mode=TwoWay}"
                                                                        Margin="6,0"
                                                                        BorderThickness="1"
                                                                        BorderBrush="#CED4DA"
                                                                        Padding="10,8"
                                                                        FontSize="13"
                                                                        CornerRadius="4"
                                                                        HorizontalAlignment="Stretch"/>

                                                                <!-- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ -->
                                                                <TextBox Grid.Column="5"
                                                                        Text="{Binding Password, Mode=TwoWay}"
                                                                        Margin="6,0"
                                                                        BorderThickness="1"
                                                                        BorderBrush="#CED4DA"
                                                                        Padding="10,8"
                                                                        FontSize="13"
                                                                        CornerRadius="4"
                                                                        HorizontalAlignment="Stretch"/>

                                                                <!-- WSLãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ -->
                                                                <ComboBox Grid.Column="6"
                                                                         ItemsSource="{Binding $parent[ItemsControl].DataContext.DbConfigViewModel.WslDistributions}"
                                                                         SelectedItem="{Binding WslDistro, Mode=TwoWay}"
                                                                         Margin="6,0"
                                                                         Padding="10,8"
                                                                         FontSize="13"
                                                                         CornerRadius="4"
                                                                         HorizontalAlignment="Stretch"/>

                                                                <!-- æ“ä½œ -->
                                                                <Button Grid.Column="7"
                                                                       Content="ðŸ—‘ï¸ å‰Šé™¤"
                                                                       Command="{Binding $parent[ItemsControl].DataContext.DbConfigViewModel.RemoveConnectionCommand}"
                                                                       CommandParameter="{Binding}"
                                                                       Classes="danger"
                                                                       HorizontalAlignment="Stretch"
                                                                       Padding="10,8"
                                                                       FontSize="12"
                                                                       Margin="6,0"
                                                                       MinWidth="80"/>
                                                            </Grid>
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </ScrollViewer>
                                    </Grid>
                                </Grid>
                            </Border>
                        </Grid>
                    </ScrollViewer>
                </Grid>
            </TabItem>

            <!-- ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚¿ãƒ– -->
            <TabItem Header="ðŸ“¤ ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ">
                <Grid RowDefinitions="Auto,*">
                    <Grid Grid.Row="0"
                          RowDefinitions="Auto,Auto">
                        <TextBlock Grid.Row="0"
                                   Text="ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ"
                                   Classes="title"
                                   Margin="8"/>

                        <!-- è¿žæŽ¥é€‰æ‹© -->
                        <Border Grid.Row="1" Classes="card"
                                Background="LightCyan">
                            <Grid RowDefinitions="Auto,Auto">
                                <TextBlock Grid.Row="0"
                                           Text="æŽ¥ç¶šé¸æŠž"
                                           Classes="section-title"/>
                                <Grid Grid.Row="1" ColumnDefinitions="*,Auto">
                                    <ComboBox Grid.Column="0"
                                              ItemsSource="{Binding ImportExportViewModel.Connections}"
                                              SelectedItem="{Binding ImportExportViewModel.SelectedConnection}"
                                              PlaceholderText="ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šã‚’é¸æŠžã—ã¦ãã ã•ã„">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding ConfigurationName}"/>
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                    <Button Grid.Column="1"
                                            Content="ðŸ“‹ ãƒ†ãƒ¼ãƒ–ãƒ«ãƒªã‚¹ãƒˆã‚’èª­ã¿è¾¼ã¿"
                                            Command="{Binding ImportExportViewModel.LoadTablesCommand}"
                                            Classes="primary"/>
                                </Grid>
                            </Grid>
                        </Border>
                    </Grid>
                    <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Disabled"
                                  VerticalScrollBarVisibility="Auto"
                                  HorizontalAlignment="Stretch">
                        <Grid Margin="8" 
                              RowDefinitions="Auto,Auto,Auto"
                              HorizontalAlignment="Stretch">
                            

                            <!-- è¡¨æ ¼åˆ—è¡¨ -->
                            <Border Grid.Row="0" Classes="card" Padding="100,10,100,10">
                                <Grid RowDefinitions="Auto,Auto,Auto,*">
                                    <TextBlock Grid.Row="0"
                                              Text="ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§ã€Œã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆç”¨ã€"
                                              Classes="section-title"/>
                                    <StackPanel Grid.Row="1"
                                                Orientation="Horizontal"
                                                Margin="0,0,0,10">
                                        <Button Content="âœ” å…¨é¸æŠž"
                                                Command="{Binding ImportExportViewModel.SelectAllTablesCommand}"
                                                Margin="0,0,10,0"/>
                                        <Button Content="âœ– å…¨è§£é™¤"
                                                Command="{Binding ImportExportViewModel.DeselectAllTablesCommand}"
                                                Margin="0,0,10,0"/>
                                    </StackPanel>
                                    <TextBlock Grid.Row="2"
                                               Text="{Binding ImportExportViewModel.SelectedTableCount, StringFormat='é¸æŠžä¸­: {0} ãƒ•ã‚¡ã‚¤ãƒ«'}"
                                               FontSize="13"
                                               Foreground="#6C757D"
                                               Margin="0,0,0,10"/>
                                    <ListBox Grid.Row="3"
                                            ItemsSource="{Binding ImportExportViewModel.Tables}"
                                            MaxHeight="380"
                                            Background="White">
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <Border Padding="14,10"
                                                       BorderBrush="#E9ECEF"
                                                       BorderThickness="0,0,0,1"
                                                       Background="Transparent"
                                                       PointerPressed="OnItemPointerPressed">
                                                    <Grid ColumnDefinitions="50,120,*,100">
                                                        <CheckBox Grid.Column="0"
                                                                 IsChecked="{Binding IsSelected}"
                                                                 VerticalAlignment="Center"/>
                                                        <TextBlock Grid.Column="1"
                                                                  Text="{Binding SchemaName}"
                                                                  VerticalAlignment="Center"
                                                                  Foreground="#6C757D"/>
                                                        <TextBlock Grid.Column="2"
                                                                  Text="{Binding TableName}"
                                                                  VerticalAlignment="Center"/>
                                                        <TextBlock Grid.Column="3"
                                                                  Text="{Binding RowCount, StringFormat='{}{0:N0} è¡Œ'}"
                                                                  VerticalAlignment="Center"
                                                                  HorizontalAlignment="Right"
                                                                  Foreground="#6C757D"
                                                                  FontSize="13"/>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox>
                                </Grid>
                            </Border>
                            
                            <!-- å¯¼å‡ºå’Œå¯¼å…¥åŒºåŸŸ -->
                            <Grid Grid.Row="1" ColumnDefinitions="*,*" Margin="0,0,0,10">
                                <!-- å¯¼å‡ºå¡ç‰‡ -->
                                <Border Grid.Column="0" Classes="card" Margin="0,0,0,0">
                                    <Grid RowDefinitions="Auto,Auto,Auto">
                                        <TextBlock Grid.Row="0"
                                                  Text="ðŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ"
                                                  Classes="section-title"/>
                                        <Grid Grid.Row="1"
                                              Margin="0,0,0,0">
                                            <Grid.ColumnDefinitions>
                                                <!-- TextBox å  70% ç©ºé—´ -->
                                                <ColumnDefinition Width="7*" />
                                                <!-- Button å  30% ç©ºé—´ -->
                                                <ColumnDefinition Width="3*" />
                                            </Grid.ColumnDefinitions>
                                            
                                            <TextBox Grid.Column="0" Text="{Binding ImportExportViewModel.ExportFolderPath}"
                                                                    Watermark="ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠžã—ã¦ãã ã•ã„"
                                                                    Margin="0,0,0,14"
                                                                    HorizontalAlignment="Stretch"/> 
                                                                    <!-- IsReadOnly="True" -->
                                            <Button Grid.Column="1" Content="ðŸ“ é¸æŠž"
                                                                   Command="{Binding ImportExportViewModel.SelectExportFolderCommand}"
                                                                   Classes="primary"
                                                                   Margin="20,0,0,14"
                                                                   HorizontalAlignment="Stretch"/>
                                        </Grid>
                                        
                                        <Button Grid.Row="2" Margin="0,0,0,0" HorizontalAlignment="Stretch"
                                               Content="â–¶ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Ÿè¡Œ"
                                               Command="{Binding ImportExportViewModel.ExportTablesCommand}"
                                               IsEnabled="{Binding !ImportExportViewModel.IsProcessing}"
                                               Classes="success"/>
                                    </Grid>
                                </Border>

                                <!-- å¯¼å…¥å¡ç‰‡ -->
                                <Border Grid.Column="1" Classes="card" Margin="4,0,0,0">
                                    <Grid RowDefinitions="Auto,Auto,Auto">
                                        <TextBlock Grid.Row="0"
                                                  Text="ðŸ“¥ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ"
                                                  Classes="section-title"/>
                                        <Grid Grid.Row="1"
                                              Margin="0,0,0,0">
                                            <Grid.ColumnDefinitions>
                                                <!-- TextBox å  70% ç©ºé—´ -->
                                                <ColumnDefinition Width="7*" />
                                                <!-- Button å  30% ç©ºé—´ -->
                                                <ColumnDefinition Width="3*" />
                                            </Grid.ColumnDefinitions>
                                            <TextBox Grid.Column="0" 
                                                     Text="{Binding ImportExportViewModel.ImportFolderPath}"
                                                     Watermark="ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠžã—ã¦ãã ã•ã„"
                                                     Margin="0,0,0,14"
                                                     HorizontalAlignment="Stretch"/>
                                                     <!-- IsReadOnly="True" -->
                                            <Button Grid.Column="1" 
                                                    Content="ðŸ“ é¸æŠž"
                                                    Command="{Binding ImportExportViewModel.SelectImportFolderCommand}"
                                                    Classes="primary"
                                                    Margin="20,0,0,14"
                                                    HorizontalAlignment="Stretch"/>
                                        </Grid>
                                        <Button Grid.Row="2" Margin="0,0,0,0" HorizontalAlignment="Stretch"
                                               Content="â–¶ ã‚¤ãƒ³ãƒãƒ¼ãƒˆå®Ÿè¡Œ"
                                               Command="{Binding ImportExportViewModel.ImportTablesCommand}"
                                               IsEnabled="{Binding !ImportExportViewModel.IsProcessing}"
                                               Classes="success"/>
                                    </Grid>
                                </Border>
                            </Grid>

                            <!-- è¿›åº¦æ¡ -->
                            <Border Grid.Row="2"
                                   Classes="card"
                                   IsVisible="{Binding ImportExportViewModel.IsProcessing}">
                                <Grid RowDefinitions="Auto,Auto">
                                    <TextBlock Grid.Row="0"
                                              Text="å‡¦ç†ä¸­..."
                                              Classes="section-title"/>
                                    <ProgressBar Grid.Row="1"
                                                Value="{Binding ImportExportViewModel.ProgressValue}"
                                                Maximum="100"/>
                                </Grid>
                            </Border>
                        </Grid>
                    </ScrollViewer>
                </Grid>
                
            </TabItem>

            <!-- ãƒ‡ãƒ¼ã‚¿æ¯”è¼ƒã‚¿ãƒ– -->
            <TabItem Header="ðŸ” ãƒ‡ãƒ¼ã‚¿æ¯”è¼ƒ">
                <Grid RowDefinitions="Auto,*">
                    <Grid Grid.Row="0"
                          RowDefinitions="Auto,Auto">
                        <TextBlock Grid.Row="0"
                                   Text="CSV ãƒ•ã‚¡ã‚¤ãƒ«æ¯”è¼ƒ"
                                   Classes="title"
                                   Margin="8"/>

                        <!-- æ•°æ®åº“è¿žæŽ¥é€‰æ‹© -->
                        <Border Grid.Row="1" Classes="card"
                                Background="LightCyan">
                            <Grid RowDefinitions="Auto,Auto">
                                <TextBlock Grid.Row="0"
                                           Text="æŽ¥ç¶šé¸æŠž"
                                           Classes="section-title"/>
                                <ComboBox Grid.Row="1"
                                          ItemsSource="{Binding CompareViewModel.Connections}"
                                          SelectedItem="{Binding CompareViewModel.SelectedConnection}"
                                          PlaceholderText="ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šã‚’é¸æŠžã—ã¦ãã ã•ã„ï¼ˆä¸»ã‚­ãƒ¼å–å¾—ç”¨ï¼‰">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding ConfigurationName}"/>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>
                            </Grid>
                        </Border>
                    </Grid>
                    <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Disabled"
                              VerticalScrollBarVisibility="Auto"
                              HorizontalAlignment="Stretch">
                        <Grid Margin="8" 
                              RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto"
                              HorizontalAlignment="Stretch">
                            
                            <!-- æ–‡ä»¶å¤¹é€‰æ‹© -->
                            <Border Grid.Row="0" Classes="card">
                                <Grid RowDefinitions="Auto,Auto,Auto" ColumnDefinitions="*,*">
                                    <TextBlock Grid.Row="0"
                                              Grid.ColumnSpan="2"
                                              Text="ãƒ•ã‚©ãƒ«ãƒ€é¸æŠž"
                                              Classes="section-title"
                                              Margin="0,0,0,18"/>
                                    
                                    <StackPanel Grid.Row="1" 
                                                Grid.ColumnSpan="2" Margin="0,0,0,12">
                                        <TextBlock Text="æ›´æ–°å‰ãƒ•ã‚©ãƒ«ãƒ€"
                                                   FontSize="14"
                                                   Margin="0,0,0,10"
                                                   Foreground="#495057"/>
                                        <Grid ColumnDefinitions="*,Auto">
                                            <TextBox Grid.Column="0"
                                                     Text="{Binding CompareViewModel.BaseFolderPath}"
                                                     Watermark="æ›´æ–°å‰ãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠžã—ã¦ãã ã•ã„"
                                                     Margin="0,0,12,0"/>
                                                     <!-- IsReadOnly="True" -->
                                            <Button Grid.Column="1"
                                                    Content="ðŸ“ é¸æŠž"
                                                    Command="{Binding CompareViewModel.SelectBaseFolderCommand}"
                                                    Classes="primary"
                                                    Margin="0,0,12,0"/>
                                        </Grid>
                                    </StackPanel>

                                    <StackPanel Grid.Row="2" Grid.Column="0" Margin="0,0,12,0">
                                        <TextBlock Text="æ—§ãƒ•ã‚©ãƒ«ãƒ€"
                                                  FontSize="14"
                                                  Margin="0,0,0,10"
                                                  Foreground="#495057"/>
                                        <Grid ColumnDefinitions="*,Auto">
                                            <TextBox Grid.Column="0"
                                                    Text="{Binding CompareViewModel.OldFolderPath}"
                                                    Watermark="æ—§ãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠžã—ã¦ãã ã•ã„"
                                                    Margin="0,0,12,0"/>
                                                    <!-- IsReadOnly="True" -->
                                            <Button Grid.Column="1"
                                                   Content="ðŸ“ é¸æŠž"
                                                   Command="{Binding CompareViewModel.SelectOldFolderCommand}"
                                                   Classes="primary"
                                                   Margin="0,0,12,0"/>
                                        </Grid>
                                    </StackPanel>

                                    <StackPanel Grid.Row="2" Grid.Column="1" Margin="12,0,0,0">
                                        <TextBlock Text="æ–°ãƒ•ã‚©ãƒ«ãƒ€"
                                                  FontSize="14"
                                                  Margin="0,0,0,10"
                                                  Foreground="#495057"/>
                                        <Grid ColumnDefinitions="*,Auto">
                                            <TextBox Grid.Column="0"
                                                    Text="{Binding CompareViewModel.NewFolderPath}"
                                                    Watermark="æ–°ãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠžã—ã¦ãã ã•ã„"
                                                    Margin="0,0,12,0"/>
                                                    <!-- IsReadOnly="True" -->
                                            <Button Grid.Column="1"
                                                   Content="ðŸ“ é¸æŠž"
                                                   Command="{Binding CompareViewModel.SelectNewFolderCommand}"
                                                   Classes="primary"
                                                   Margin="0,0,12,0"/>
                                        </Grid>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- CSVæ–‡ä»¶é€‰æ‹© æš‚æ—¶ä¸éœ€è¦çš„åŠŸèƒ½ï¼Œéšè—-->
                            <Border Grid.Row="1" Classes="card" IsVisible="False">
                                <Grid RowDefinitions="Auto,Auto,Auto,*">
                                    <TextBlock Grid.Row="0"
                                              Text="CSV ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠž"
                                              Classes="section-title"/>
                                    <StackPanel Grid.Row="1"
                                               Orientation="Horizontal"
                                               Margin="0,0,0,12">
                                        <Button Content="âœ” å…¨é¸æŠž"
                                               Command="{Binding CompareViewModel.SelectAllCsvFilesCommand}"
                                               Margin="0,0,10,0"/>
                                        <Button Content="âœ– å…¨è§£é™¤"
                                               Command="{Binding CompareViewModel.DeselectAllCsvFilesCommand}"
                                               Margin="0,0,10,0"/>
                                    </StackPanel>
                                    <TextBlock Grid.Row="2"
                                              Text="{Binding CompareViewModel.SelectedCsvFileCount, StringFormat='é¸æŠžä¸­: {0} ãƒ•ã‚¡ã‚¤ãƒ«'}"
                                              FontSize="13"
                                              Foreground="#6C757D"
                                              Margin="0,0,0,10"/>
                                    <ListBox Grid.Row="3"
                                             ItemsSource="{Binding CompareViewModel.CsvFileInfos}"
                                             MaxHeight="300"
                                             Background="White"> <!-- ç¦ç”¨é€‰æ‹©æ¨¡å¼ -->
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <!-- è®©æ•´ä¸ª Border å“åº”é¼ æ ‡ç‚¹å‡» -->
                                                <Border Padding="12,8"
                                                        BorderBrush="#E9ECEF"
                                                        BorderThickness="0,0,0,1"
                                                        Background="Transparent"
                                                        PointerPressed="OnItemPointerPressed"> <!-- æ·»åŠ äº‹ä»¶å¤„ç† -->
                                                    <Grid ColumnDefinitions="30,*">
                                                        <CheckBox Grid.Column="0"
                                                                  IsChecked="{Binding IsSelected}"
                                                                  VerticalAlignment="Center"/>
                                                        <TextBlock Grid.Column="1"
                                                                   Text="{Binding FileName}"
                                                                   VerticalAlignment="Center"
                                                                   FontSize="13"
                                                                   Margin="8,0,0,0"/>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox>
                                </Grid>
                            </Border>

                            <!-- å¯¼å‡ºè®¾ç½® -->
                            <Border Grid.Row="2" Classes="card">
                                <Grid RowDefinitions="Auto,Auto,Auto">
                                    <TextBlock Grid.Row="0"
                                              Text="ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆè¨­å®š"
                                              Classes="section-title"/>
                                    <Grid Grid.Row="1" ColumnDefinitions="*,Auto">
                                        <TextBox Grid.Column="0"
                                                Text="{Binding CompareViewModel.ExportFilePath}"
                                                Watermark="ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ (.xlsx)"
                                                Margin="0,0,12,0"/>
                                        <Button Grid.Column="1"
                                               Content="ðŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠž"
                                               Command="{Binding CompareViewModel.SelectExportFileCommand}"
                                               Classes="primary"
                                               Margin="0,0,12,0"/>
                                    </Grid>
                                    <Grid Grid.Row="2" ColumnDefinitions="Auto,*">
                                        <CheckBox Grid.Column="0" Content="CISã®[access__log]ãƒ†ãƒ¼ãƒ–ãƒ«ã®å·®åˆ†ã‚‚å‡ºåŠ›"
                                                  IsChecked="{Binding CompareViewModel.AccessLogChecked}"
                                                  FontFamily="avares://WslPostgreTool/Assets/LXGWWenKai-Bold.ttf#éœžé¹œæ–‡æ¥·"
                                                  Margin="0,10,10,0"/>
                                        <Button Grid.Column="1" Content="â–¶ æ¯”è¼ƒå®Ÿè¡Œ"
                                                Command="{Binding CompareViewModel.CompareCsvFilesCommand}"
                                                IsEnabled="{Binding !CompareViewModel.IsProcessing}"
                                                Classes="success"
                                                HorizontalAlignment="Stretch"
                                                HorizontalContentAlignment="Center"
                                                FontSize="15"
                                                Margin="0,10,0,0"/>
                                    </Grid>
                                </Grid>
                            </Border>

                            <!-- è¿›åº¦æ¡ -->
                            <Border Grid.Row="3"
                                   Classes="card"
                                   IsVisible="{Binding CompareViewModel.IsProcessing}">
                                <Grid RowDefinitions="Auto,Auto">
                                    <TextBlock Grid.Row="0"
                                              Text="å‡¦ç†ä¸­..."
                                              Classes="section-title"/>
                                    <ProgressBar Grid.Row="1"
                                                Value="{Binding CompareViewModel.ProgressValue}"
                                                Maximum="100"/>
                                </Grid>
                            </Border>
                        </Grid>
                    </ScrollViewer>
                </Grid>
                
            </TabItem>
        </TabControl>

        <!-- åº•éƒ¨æ—¥å¿—åŒºåŸŸ -->
        <Border Grid.Row="2"
               Background="#FFFFFF"
               BorderBrush="#DEE2E6"
               BorderThickness="0,2,0,0"
               Padding="18,14"
               MaxHeight="200">
            <Grid RowDefinitions="Auto,*" x:Name="LogGrid">
                <StackPanel Grid.Row="0"
                            Orientation="Horizontal"
                            Margin="0,0,0,10">
                    <TextBlock Text="ðŸ“‹ ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°"
                               FontSize="12"
                               Foreground="#495057"/>
            
                    <!-- æ·»åŠ æ¸…ç©ºæ—¥å¿—æŒ‰é’® -->
                    <Button Content="ðŸ—‘ï¸ ã‚¯ãƒªã‚¢"
                            Command="{Binding ClearLogsCommand}"
                            Margin="10,0,0,0"
                            Padding="0,0,0,0"
                            FontSize="12"
                            Classes="secondary"
                            HorizontalContentAlignment="Center"/>
                </StackPanel>
                <!-- ä¿®æ”¹ ScrollViewer å†…å®¹ä¸º ItemsControl -->
                <ScrollViewer Grid.Row="1" x:Name="LogScrollViewer"
                              VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">
                    <ItemsControl ItemsSource="{Binding LogMessages}">
                        <!-- å¯ç”¨è™šæ‹ŸåŒ–ï¼Œæå‡æ€§èƒ½ -->
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                
                        <!-- å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—å¦‚ä½•æ˜¾ç¤ºï¼ˆæ”¯æŒåˆ†çº§å’Œé¢œè‰²ï¼‰ -->
                        <ItemsControl.ItemTemplate>
                            <DataTemplate x:DataType="m:LogEntry">
                                <TextBlock TextWrapping="Wrap"
                                           FontSize="12"
                                           LineHeight="18"
                                           Margin="0,0,0,2"
                                           Foreground="{Binding Level, Converter={StaticResource LogLevelToColorConverter}}">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="[{0}] {1}">
                                            <Binding Path="Timestamp"/>
                                            <Binding Path="Message"/>
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Grid>
        </Border>
    </Grid>
</Window>